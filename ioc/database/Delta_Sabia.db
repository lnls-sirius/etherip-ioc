###########################################################
# Basic Undulator Controls

record(bo, "$(P)$(R)Abort-Cmd"){
    field(DESC, "Abort motion cmd")
    field(SCAN, "Passive")
    field(ONAM, "Start")
    field(ZNAM, "Start")
    field(FLNK, "$(P)$(R)AbortFlg")
}

# read by sncSabia
record(calc, "$(P)$(R)AbortFlg"){
    field(DESC, "Abort motion flag")
    field(CALC, "VAL+1")
    field(VAL, "0")
}

# read by sncSabia
record(ao, "$(P)$(R)PosTolerance-SP"){
    field(DESC, "Position tolerance")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "mm")
    field(DRVH, "")
    field(DRVL, "")
    field(FLNK, "$(P)$(R)PosTolerance-RB")
}

record(ai, "$(P)$(R)PosTolerance-RB"){
    field(INP, "$(P)$(R)PosTolerance-SP")
    field(DESC, "Position tolerance RB")
    field(PREC, "3")
    field(EGU,  "mm")
}

record(bo, "$(P)$(R)ChangePol-Cmd"){
    field(DESC, "Change polarization cmd")
    field(SCAN, "Passive")
    field(ONAM, "Start")
    field(ZNAM, "Start")
    field(FLNK, "$(P)$(R)ChangePolFlg")
}

# read by sncSabia
record(calc, "$(P)$(R)ChangePolFlg"){
    field(DESC, "Change polarization flag")
    field(CALC, "VAL+1")
    field(VAL, "0")
}

# read by sncSabia
record(mbbo, "$(P)$(R)PolType-Sel"){
    field(DESC, "Polarization type")
    field(SCAN, "Passive")
    field(OMSL, "supervisory")
    field(IVOA, "Don't drive outputs")
    field(UNSV, "MINOR")
    field(ZRST, "Circ right")
    field(ONST, "Circ left")
    field(TWST, "Linear vert")
    field(THST, "Linear hor")
    field(FLNK, "$(P)$(R)PolType-Sts")
}

record(mbbi, "$(P)$(R)PolType-Sts"){
    field(INP, "$(P)$(R)PolType-Sel")
    field(DESC, "Polarization type sts")
    field(UNSV, "MINOR")
    field(ZRST, "Circ right")
    field(ONST, "Circ left")
    field(TWST, "Linear vert")
    field(THST, "Linear hor")
}

record(bo, "$(P)$(R)ChangeGain-Cmd"){
    field(DESC, "Change undulator gain cmd")
    field(SCAN, "Passive")
    field(ONAM, "Start")
    field(ZNAM, "Start")
    field(FLNK, "$(P)$(R)ChangeGainFlg")
}

# read by sncSabia
record(calc, "$(P)$(R)ChangeGainFlg"){
    field(DESC, "Change gain flag")
    field(CALC, "VAL+1")
    field(VAL, "0")
}

# read by sncSabia
record(mbbo, "$(P)$(R)GainMotionType-Sel"){
    field(DESC, "Gain motion type")
    field(SCAN, "Passive")
    field(OMSL, "supervisory")
    field(IVOA, "Don't drive outputs")
    field(UNSV, "MINOR")
    field(ZRST, "mm")
    field(ONST, "K")
    field(TWST, "Energy")
    field(FLNK, "$(P)$(R)GainMotionType-Sts")
}

record(mbbi, "$(P)$(R)GainMotionType-Sts"){
    field(INP, "$(P)$(R)GainMotionType-Sel")
    field(DESC, "Gain motion type sts")
    field(UNSV, "MINOR")
    field(ZRST, "mm")
    field(ONST, "K")
    field(TWST, "Energy")
}

# read by sncSabia
record(ao, "$(P)$(R)Energy-SP"){
    field(DESC, "Energy value in Gain config")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "eV")
    field(DRVH, "")
    field(DRVL, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)Energy-RB")
}

record(ai, "$(P)$(R)Energy-RB"){
    field(INP, "$(P)$(R)Energy-SP")
    field(DESC, "Energy value in Gain config RB")
    field(PREC, "3")
    field(EGU,  "eV")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

# read by sncSabia
record(ao, "$(P)$(R)K-SP"){
    field(DESC, "K value in Gain config")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "ND")
    field(DRVH, "")
    field(DRVL, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)K-RB")
}

record(ai, "$(P)$(R)K-RB"){
    field(INP, "$(P)$(R)K-SP")
    field(DESC, "K value in Gain config RB")
    field(PREC, "3")
    field(EGU,  "ND")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

# read by sncSabia
record(ao, "$(P)$(R)Shift-SP"){
    field(DESC, "Shift value in Gain config")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "mm")
    field(DRVH, "")
    field(DRVL, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)Shift-RB")
}

record(ai, "$(P)$(R)Shift-RB"){
    field(INP, "$(P)$(R)Shift-SP")
    field(DESC, "Shift value in Gain config RB")
    field(PREC, "3")
    field(EGU,  "mm")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

# axis CID relative position related to polarization
record(calc, "$(P)$(R)ActualPolDisplacement-Mon"){
    field(DESC, "Actual pos displacement for pol mon")
    field(EGU, "mm")
    field(PREC, "3")
    # monitor axis that move only in Phase mode
    field(INPA, "$(P)$(R)Mod01PhyCIDActualPos-Mon CPP")
    # no conversion is needed
    field(CALC, "A")
}

# axis CID position defines degree of polarization
record(calc, "$(P)$(R)ActualPol-Mon"){
    field(DESC, "Actual polarization mon")
    field(EGU, "pol rate")
    field(PREC, "3")
    # monitor axis that move only in Phase mode
    field(INPA, "$(P)$(R)Mod01PhyCIDActualPos-Mon CPP")
    # convert from mm to polarization rate
    field(CALC, "A")
}

# axis CIE relative position related to K (energy)
record(calc, "$(P)$(R)ActualKDisplacement-Mon"){
    field(DESC, "Actual pos displacement for K mon")
    field(EGU, "mm")
    field(PREC, "3")
    # monitor axis that move only in Energy mode
    field(INPA, "$(P)$(R)Mod01PhyCIEActualPos-Mon CPP")
    # no conversion is needed
    field(CALC, "A")
}

# axis CIE position defines K value (in GH mode)
record(calc, "$(P)$(R)ActualK-Mon"){
    field(DESC, "Actual K mon")
    field(EGU, "ND")
    field(PREC, "3")
    # monitor axis that move only in Energy mode
    field(INPA, "$(P)$(R)Mod01PhyCIEActualPos-Mon CPP")
    field(INPB, "$(P)$(R)ConvShiftToKA0-SP")
    field(INPC, "$(P)$(R)ConvShiftToKA1-SP")
    field(INPD, "$(P)$(R)ConvShiftToKA2-SP")
    field(INPE, "$(P)$(R)ConvShiftToKA3-SP")
    field(INPF, "$(P)$(R)ConvShiftToKA4-SP")
    field(INPG, "$(P)$(R)ConvShiftToKA5-SP")
    field(INPH, "$(P)$(R)ConvShiftToKA6-SP")
    field(INPI, "$(P)$(R)ConvShiftToKA7-SP")
    field(INPJ, "$(P)$(R)ConvShiftToKA8-SP")
    # convert from mm to K value (dimensionless)
    field(CALC, "J*A^8+I*A^7+H*A^6+G*A^5+F*A^4+E*A^3+D*A^2+C*A+B")
    field(FLNK, "$(P)$(R)ActualEnergy-Mon")
}

# axis CIE position defines energy value (in GH mode)
record(calc, "$(P)$(R)ActualEnergy-Mon"){
    field(DESC, "Actual energy mon")
    field(EGU, "eV")
    field(PREC, "3")
    # monitor axis that move only in Energy mode
    field(INPA, "$(P)$(R)ActualK-Mon")
    field(INPB, "$(P)$(R)ConvKToEnergyA0-SP")
    field(INPC, "$(P)$(R)ConvKToEnergyA1-SP")
    field(INPD, "$(P)$(R)ConvKToEnergyA2-SP")
    field(INPE, "$(P)$(R)ConvKToEnergyA3-SP")
    field(INPF, "$(P)$(R)ConvKToEnergyA4-SP")
    field(INPG, "$(P)$(R)ConvKToEnergyA5-SP")
    field(INPH, "$(P)$(R)ConvKToEnergyA6-SP")
    field(INPI, "$(P)$(R)ConvKToEnergyA7-SP")
    field(INPJ, "$(P)$(R)ConvKToEnergyA8-SP")
    # convert from K to eV
    field(CALC, "J*A^8+I*A^7+H*A^6+G*A^5+F*A^4+E*A^3+D*A^2+C*A+B")
}

###########################################################
# Conversion Coefficients

## Shift to K coefficients

record(ao, "$(P)$(R)ConvShiftToKA0-SP"){
    field(DESC, "Conv from shift to K polynomial a0")
    field(FLNK, "$(P)$(R)ConvShiftToKA0-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA0-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA0-SP")
    field(DESC, "Conv from shift to K polynomial a0 RB")
}

record(ao, "$(P)$(R)ConvShiftToKA1-SP"){
    field(DESC, "Conv from shift to K polynomial a1")
    field(FLNK, "$(P)$(R)ConvShiftToKA1-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA1-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA1-SP")
    field(DESC, "Conv from shift to K polynomial a1 RB")
}

record(ao, "$(P)$(R)ConvShiftToKA2-SP"){
    field(DESC, "Conv from shift to K polynomial a2")
    field(FLNK, "$(P)$(R)ConvShiftToKA2-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA2-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA2-SP")
    field(DESC, "Conv from shift to K polynomial a2 RB")
}

record(ao, "$(P)$(R)ConvShiftToKA3-SP"){
    field(DESC, "Conv from shift to K polynomial a3")
    field(FLNK, "$(P)$(R)ConvShiftToKA3-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA3-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA3-SP")
    field(DESC, "Conv from shift to K polynomial a3 RB")
}

record(ao, "$(P)$(R)ConvShiftToKA4-SP"){
    field(DESC, "Conv from shift to K polynomial a4")
    field(FLNK, "$(P)$(R)ConvShiftToKA4-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA4-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA4-SP")
    field(DESC, "Conv from shift to K polynomial a4 RB")
}

record(ao, "$(P)$(R)ConvShiftToKA5-SP"){
    field(DESC, "Conv from shift to K polynomial a5")
    field(FLNK, "$(P)$(R)ConvShiftToKA5-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA5-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA5-SP")
    field(DESC, "Conv from shift to K polynomial a5 RB")
}

record(ao, "$(P)$(R)ConvShiftToKA6-SP"){
    field(DESC, "Conv from shift to K polynomial a6")
    field(FLNK, "$(P)$(R)ConvShiftToKA6-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA6-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA6-SP")
    field(DESC, "Conv from shift to K polynomial a6 RB")
}

record(ao, "$(P)$(R)ConvShiftToKA7-SP"){
    field(DESC, "Conv from shift to K polynomial a7")
    field(FLNK, "$(P)$(R)ConvShiftToKA7-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA7-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA7-SP")
    field(DESC, "Conv from shift to K polynomial a7 RB")
}

record(ao, "$(P)$(R)ConvShiftToKA8-SP"){
    field(DESC, "Conv from shift to K polynomial a8")
    field(FLNK, "$(P)$(R)ConvShiftToKA8-RB")
}
record(ai, "$(P)$(R)ConvShiftToKA8-RB"){
    field(INP, "$(P)$(R)ConvShiftToKA8-SP")
    field(DESC, "Conv from shift to K polynomial a8 RB")
}

## K to energy coefficients

record(ao, "$(P)$(R)ConvKToEnergyA0-SP"){
    field(DESC, "Conv from K to energy polynomial a0")
    field(FLNK, "$(P)$(R)ConvKToEnergyA0-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA0-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA0-SP")
    field(DESC, "Conv from K to energy polynomial a0 RB")
}

record(ao, "$(P)$(R)ConvKToEnergyA1-SP"){
    field(DESC, "Conv from K to energy polynomial a1")
    field(FLNK, "$(P)$(R)ConvKToEnergyA1-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA1-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA1-SP")
    field(DESC, "Conv from K to energy polynomial a1 RB")
}

record(ao, "$(P)$(R)ConvKToEnergyA2-SP"){
    field(DESC, "Conv from K to energy polynomial a2")
    field(FLNK, "$(P)$(R)ConvKToEnergyA2-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA2-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA2-SP")
    field(DESC, "Conv from K to energy polynomial a2 RB")
}

record(ao, "$(P)$(R)ConvKToEnergyA3-SP"){
    field(DESC, "Conv from K to energy polynomial a3")
    field(FLNK, "$(P)$(R)ConvKToEnergyA3-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA3-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA3-SP")
    field(DESC, "Conv from K to energy polynomial a3 RB")
}

record(ao, "$(P)$(R)ConvKToEnergyA4-SP"){
    field(DESC, "Conv from K to energy polynomial a4")
    field(FLNK, "$(P)$(R)ConvKToEnergyA4-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA4-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA4-SP")
    field(DESC, "Conv from K to energy polynomial a4 RB")
}

record(ao, "$(P)$(R)ConvKToEnergyA5-SP"){
    field(DESC, "Conv from K to energy polynomial a5")
    field(FLNK, "$(P)$(R)ConvKToEnergyA5-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA5-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA5-SP")
    field(DESC, "Conv from K to energy polynomial a5 RB")
}

record(ao, "$(P)$(R)ConvKToEnergyA6-SP"){
    field(DESC, "Conv from K to energy polynomial a6")
    field(FLNK, "$(P)$(R)ConvKToEnergyA6-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA6-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA6-SP")
    field(DESC, "Conv from K to energy polynomial a6 RB")
}

record(ao, "$(P)$(R)ConvKToEnergyA7-SP"){
    field(DESC, "Conv from K to energy polynomial a7")
    field(FLNK, "$(P)$(R)ConvKToEnergyA7-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA7-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA7-SP")
    field(DESC, "Conv from K to energy polynomial a7 RB")
}

record(ao, "$(P)$(R)ConvKToEnergyA8-SP"){
    field(DESC, "Conv from K to energy polynomial a8")
    field(FLNK, "$(P)$(R)ConvKToEnergyA8-RB")
}
record(ai, "$(P)$(R)ConvKToEnergyA8-RB"){
    field(INP, "$(P)$(R)ConvKToEnergyA8-SP")
    field(DESC, "Conv from K to energy polynomial a8 RB")
}

###########################################################
# Energy Scan Control

record(bo, "$(P)$(R)StartEScan-Cmd"){
    field(DESC, "Start energy scan cmd")
    field(SCAN, "Passive")
    field(ONAM, "Start")
    field(ZNAM, "Start")
    field(FLNK, "$(P)$(R)StartEScanFlg")
}

# read by sncSabia
record(calc, "$(P)$(R)StartEScanFlg"){
    field(DESC, "Start energy scan flag")
    field(CALC, "VAL+1")
    field(VAL, "0")
}

# read by sncSabia
record(ao, "$(P)$(R)EScanStartPos-SP"){
    field(DESC, "Energy scan start pos")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "eV")
    field(DRVH, "")
    field(DRVL, "")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)EScanStartPos-RB")
}

record(ai, "$(P)$(R)EScanStartPos-RB"){
    field(INP, "$(P)$(R)EScanStartPos-SP")
    field(DESC, "Energy scan start pos RB")
    field(PREC, "3")
    field(EGU,  "eV")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

# read by sncSabia
record(ao, "$(P)$(R)EScanEndPos-SP"){
    field(DESC, "Energy scan end pos")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "eV")
    field(DRVH, "")
    field(DRVL, "")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)EScanEndPos-RB")
}

record(ai, "$(P)$(R)EScanEndPos-RB"){
    field(INP, "$(P)$(R)EScanEndPos-SP")
    field(DESC, "Energy scan end pos RB")
    field(PREC, "3")
    field(EGU,  "eV")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

###########################################################
# General Motion Parameters

# read by sncSabia
record(ao, "$(P)$(R)PolModeVelo-SP"){
    field(DESC, "Polarity mode velocity")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "mm/s")
    field(DRVH, "")
    field(DRVL, "0")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)PolModeVelo-RB")
}

record(ai, "$(P)$(R)PolModeVelo-RB"){
    field(INP, "$(P)$(R)PolModeVelo-SP")
    field(DESC, "Polarity mode velocity RB")
    field(PREC, "3")
    field(EGU,  "mm/s")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

# read by sncSabia
record(ao, "$(P)$(R)PolModeAcc-SP"){
    field(DESC, "Polarity mode acceleration")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "mm/s^2")
    field(DRVH, "")
    field(DRVL, "0")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)PolModeAcc-RB")
}

record(ai, "$(P)$(R)PolModeAcc-RB"){
    field(INP, "$(P)$(R)PolModeAcc-SP")
    field(DESC, "Polarity mode acceleration RB")
    field(PREC, "3")
    field(EGU,  "mm/s^2")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

# read by sncSabia
record(ao, "$(P)$(R)EnergyModeVelo-SP"){
    field(DESC, "Energy mode velocity")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "mm/s")
    field(DRVH, "")
    field(DRVL, "0")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)EnergeyModeVelo-RB")
}

record(ai, "$(P)$(R)EnergeyModeVelo-RB"){
    field(INP, "$(P)$(R)EnergyModeVelo-SP")
    field(DESC, "Energy mode velocity RB")
    field(PREC, "3")
    field(EGU,  "mm/s")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

# read by sncSabia
record(ao, "$(P)$(R)EnergyModeAcc-SP"){
    field(DESC, "Energy mode acceleration")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "mm/s^2")
    field(DRVH, "")
    field(DRVL, "0")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
    field(FLNK, "$(P)$(R)EnergeyModeAcc-RB")
}

record(ai, "$(P)$(R)EnergeyModeAcc-RB"){
    field(INP, "$(P)$(R)EnergyModeAcc-SP")
    field(DESC, "Energy mode acceleration RB")
    field(PREC, "3")
    field(EGU,  "mm/s^2")
    field(HOPR, "")
    field(LOPR, "")
    field(HIHI, "")
    field(HIGH, "")
    field(LOW, "")
    field(LOLO, "")
    field(HHSV, "")
    field(HSV, "")
    field(LSV, "")
    field(LLSV, "")
    field(HYST, "")
}

###########################################################
# Restrictions and Protection

# read by sncSabia
record(ao, "$(P)$(R)MaxVelo-SP"){
    field(DESC, "Maximum velocity")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "mm/s")
    field(DRVH, "")
    field(DRVL, "0")
    field(FLNK, "$(P)$(R)MaxVelo-RB")
}

record(ai, "$(P)$(R)MaxVelo-RB"){
    field(INP, "$(P)$(R)MaxVelo-SP")
    field(DESC, "Maximum velocity RB")
    field(PREC, "3")
    field(EGU,  "mm/s")
}

# read by sncSabia
record(ao, "$(P)$(R)MaxAcc-SP"){
    field(DESC, "Maximum acceleration")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "mm/s^2")
    field(DRVH, "")
    field(DRVL, "0")
    field(FLNK, "$(P)$(R)MaxAcc-RB")
}

record(ai, "$(P)$(R)MaxAcc-RB"){
    field(INP, "$(P)$(R)MaxAcc-SP")
    field(DESC, "Maximum acceleration RB")
    field(PREC, "3")
    field(EGU,  "mm/s^2")
}

#record(bi, "$(P)$(R)IsRemote-Mon"){
#    field(INP, "???")
#    field(DESC, "Remote control enable status")
#    field(SCAN, ".2 second")
#    field(ONAM, "Yes")
#    field(ZNAM, "No")
#}

record(bo, "$(P)$(R)BeamLineCtrlEnbl-Sel"){
    field(DESC, "Enable ID control by beam lines")
    field(SCAN, "Passive")
    field(ONAM, "Yes")
    field(ZNAM, "No")
    field(FLNK, "$(P)$(R)BeamLineCtrlEnbl-Sts")
}

record(bi, "$(P)$(R)BeamLineCtrlEnbl-Sts"){
    field(INP, "$(P)$(R)BeamLineCtrlEnbl-Sel")
    field(DESC, "Enable status of ctrl by beam lines")
    field(ONAM, "Yes")
    field(ZNAM, "No")
}

###########################################################
# Parking control

record(bo, "$(P)$(R)StartParking-Cmd"){
    field(DESC, "Start parking move")
    field(SCAN, "Passive")
    field(ONAM, "Start")
    field(ZNAM, "Start")
    field(FLNK, "$(P)$(R)ParkingRequestFlg")
}

# read by sncSabia
record(calc, "$(P)$(R)ParkingRequestFlg"){
    field(DESC, "Parking request flag")
    field(CALC, "VAL+1")
    field(VAL, "0")
}

# read/set by sncSabia
record(ao, "$(P)$(R)ParkingPol-SP"){
    field(DESC, "Parking position polarization")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "")
    field(DRVH, "")
    field(DRVL, "0")
}

# read/set by sncSabia
record(ai, "$(P)$(R)ParkingPol-RB"){
    field(DESC, "Parking position polarization RB")
    field(PREC, "3")
    field(EGU,  "")
}

# read/set by sncSabia
record(ao, "$(P)$(R)ParkingEnergy-SP"){
    field(DESC, "Parking position energy")
    field(SCAN, "Passive")
    field(PREC, "3")
    field(EGU,  "eV")
    field(DRVH, "")
    field(DRVL, "0")
}

# read/set by sncSabia
record(ai, "$(P)$(R)ParkingEnergy-RB"){
    field(DESC, "Parking position energy RB")
    field(PREC, "3")
    field(EGU,  "eV")
}

record(bo, "$(P)$(R)GetParkingPos-Cmd"){
    field(DESC, "Get current pos and save as parking")
    field(SCAN, "Passive")
    field(ONAM, "Get")
    field(ZNAM, "Get")
    field(FLNK, "$(P)$(R)GetParkingRequestFlg")
}

# read by sncSabia
record(calc, "$(P)$(R)GetParkingRequestFlg"){
    field(DESC, "Get parking pos request flag")
    field(CALC, "VAL+1")
    field(VAL, "0")
}

###########################################################
# Low Level PVs Access Control

# set by sncSabia
record(seq, "$(P)$(R)EnblLowLvlCtrl"){
    field(DESC, "Enable low lvl PVs")
    field(SELM, "All")
    field(DOL0, "0")
    field(DOL1, "0")
    field(DOL2, "0")
    field(DOL3, "0")
    field(DOL4, "0")
    field(DOL5, "0")
    field(DOL6, "0")
    field(DOL7, "0")
    field(DOL8, "0")
    field(DOL9, "0")
    field(DOLA, "0")
    field(LNK0, "$(P)$(R)Mod01Coup-Sel.DISP PP")
    field(LNK1, "$(P)$(R)Mod01TrigType-Sel.DISP PP")
    field(LNK2, "$(P)$(R)Mod01RefType-Sel.DISP PP")
    field(LNK3, "$(P)$(R)InterModCoup-Sel.DISP PP")
    field(LNK4, "$(P)$(R)Mod01Mirror-Sel.DISP PP")
    field(LNK5, "$(P)$(R)Mod01SoftTrig-Cmd.DISP PP")
    field(LNK6, "$(P)$(R)Mod01RelPos-SP.DISP PP")
    field(LNK7, "$(P)$(R)Mod01Velo-SP.DISP PP")
    field(LNK8, "$(P)$(R)Mod01MovTime-SP.DISP PP")
    field(LNK9, "$(P)$(R)Mod01Acc-SP.DISP PP")
    field(LNKA, "$(P)$(R)Mod01Decel-SP.DISP PP")
}

# set by sncSabia
record(seq, "$(P)$(R)DsblLowLvlCtrl"){
    field(DESC, "Disable low lvl PVs")
    field(SELM, "All")
    field(DOL0, "1")
    field(DOL1, "1")
    field(DOL2, "1")
    field(DOL3, "1")
    field(DOL4, "1")
    field(DOL5, "1")
    field(DOL6, "1")
    field(DOL7, "1")
    field(DOL8, "1")
    field(DOL9, "1")
    field(DOLA, "1")
    field(LNK0, "$(P)$(R)Mod01Coup-Sel.DISP PP")
    field(LNK1, "$(P)$(R)Mod01TrigType-Sel.DISP PP")
    field(LNK2, "$(P)$(R)Mod01RefType-Sel.DISP PP")
    field(LNK3, "$(P)$(R)InterModCoup-Sel.DISP PP")
    field(LNK4, "$(P)$(R)Mod01Mirror-Sel.DISP PP")
    field(LNK5, "$(P)$(R)Mod01SoftTrig-Cmd.DISP PP")
    field(LNK6, "$(P)$(R)Mod01RelPos-SP.DISP PP")
    field(LNK7, "$(P)$(R)Mod01Velo-SP.DISP PP")
    field(LNK8, "$(P)$(R)Mod01MovTime-SP.DISP PP")
    field(LNK9, "$(P)$(R)Mod01Acc-SP.DISP PP")
    field(LNKA, "$(P)$(R)Mod01Decel-SP.DISP PP")
}
