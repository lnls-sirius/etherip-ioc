version: "3.7"
x-labels:
  &default-labels
  br.com.lnls-sirius.department: ${DEPARTMENT}
  org.opencontainers.image.authors: ${AUTHOR}
  org.opencontainers.image.created: ${BUILD_DATE_RFC339}
  org.opencontainers.image.licenses: ${LICENSE}
  org.opencontainers.image.revision: ${COMMIT_HASH}
  org.opencontainers.image.source: ${REPOSITORY}
  org.opencontainers.image.url: ${REPOSITORY}
  org.opencontainers.image.vendor: ${VENDOR}
  org.opencontainers.image.version: ${COMMIT_HASH}-${BUILD_DATE}

services:
  etherip:
    build: "."
    image: ${DOCKER_IMAGE_PREFIX}/etheripioc-base:${COMMIT_HASH}-${BUILD_DATE}

  rf-bo:
    image: ${DOCKER_IMAGE_PREFIX}/etheripioc-rf-bo:${COMMIT_HASH}-${BUILD_DATE}
    build:
      context: .
      dockerfile: Dockerfile
      target: rf_bo
      labels:
        <<: *default-labels

  rf-si:
    image: ${DOCKER_IMAGE_PREFIX}/etheripioc-rf-si:${COMMIT_HASH}-${BUILD_DATE}
    build:
      context: .
      dockerfile: Dockerfile
      target: rf_si
      labels:
        <<: *default-labels

  delta:
    image: ${DOCKER_IMAGE_PREFIX}/etheripioc-delta:${COMMIT_HASH}-${BUILD_DATE}
    build:
      context: .
      dockerfile: Dockerfile
      target: delta
      labels:
        <<: *default-labels

  FCPLC01:
    image: ${DOCKER_IMAGE_PREFIX}/etheripioc-fcplc01:${COMMIT_HASH}-${BUILD_DATE}
    build:
      context: .
      dockerfile: Dockerfile
      target: FCPLC01
      labels:
        <<: *default-labels

  FCPLC02:
    image: ${DOCKER_IMAGE_PREFIX}/etheripioc-fcplc02:${COMMIT_HASH}-${BUILD_DATE}
    build:
      context: .
      dockerfile: Dockerfile
      target: FCPLC02
      labels:
        <<: *default-labels

  FCPLC03:
    image: ${DOCKER_IMAGE_PREFIX}/etheripioc-fcplc03:${COMMIT_HASH}-${BUILD_DATE}
    build:
      context: .
      dockerfile: Dockerfile
      target: FCPLC03
      labels:
        <<: *default-labels